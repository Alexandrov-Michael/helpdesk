{% extends 'main.html' %}

{% block title %}
    Задать вопрос
{% endblock %}


{% block content %}
    <h1>Задать вопроса</h1>
    <div id='question' class='borderLine'>
        <form action="{% url add_q %}" method="POST">{% csrf_token %}
            <table id='tableForm'>
                {{ form.as_table }}
            </table>
            <input type="submit" value="Создать вопрос" />
        </form>
    </div>
{% endblock %}

{% block script %}
    <script>
    function GetCompanyTo(){
                    $.ajax({
                        url: '/ajax/get_company_to/',
                        dataType: 'html',
                        type:'GET'
                    }).done(function(data){
                                $('#id_user_to').append(data).fadeIn();
              });
    }
    function GetUserTo(){
        $('#id_user_to').hide();
        $.ajax({
            url: '/ajax/get_user_to/',
            dataType: 'html',
            type:'GET'
        }).done(function(data){
                    $('#id_user_to').empty().append(data);
                }).done(function(){
                    GetCompanyTo();
                });
    }
    function ChangeForAllCheckBox(){
        $('#id_for_all').click(function(){
            if(this.checked){
                $('#id_user_to').attr("disabled","disabled");
                $('#id_user_to').val('0');
            }else{
                $('#id_user_to').removeAttr("disabled");
            }
        });
    }
    function CheckBoxForAll(){
        var value = $('#id_for_all').prop("checked");
        if(value){
            $('#id_user_to').attr("disabled","disabled");
            $('#id_user_to').val('0');
        }else{
            $('#id_user_to').removeAttr("disabled");
        }
    }
    $(document).ready(function(){
        GetUserTo();
        ChangeForAllCheckBox();
        CheckBoxForAll()
    });
    </script>
{% endblock %}